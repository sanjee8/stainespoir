{% extends 'admin/layout.html.twig' %}

{% block admin_content %}
    {% for label, msgs in app.flashes %}
        {% for m in msgs %}<div class="flash {{ label }}">{{ m }}</div>{% endfor %}
    {% endfor %}

    <h1>Parents en attente</h1>

    {% if parents is empty %}
        <p class="muted">Aucun parent en attente de validation.</p>
    {% else %}
        <div class="table-responsive">
            <table class="table">
                <thead>
                <tr>
                    <th>Nom pr√©nom</th>
                    <th>Email</th>
                    <th style="width:1%"></th>
                </tr>
                </thead>
                <tbody>
                {% for p in parents %}
                    {% set prof = attribute(p, 'profile') is defined ? p.profile : null %}
                    {% set full = (prof ? (prof.firstName ~ ' ' ~ prof.lastName) : p.email)|trim %}
                    <tr>
                        <td><strong>{{ full }}</strong></td>
                        <td class="muted">{{ p.email }}</td>
                        <td><a class="btn" href="{{ path('admin_pending_review', {id:p.id}) }}">Dossier</a></td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    {% endif %}
{% endblock %}
