{# templates/bundles/TwigBundle/Exception/error.html.twig #}
{% extends 'base.html.twig' %}

{% block title %}Erreur {{ status_code }} — {{ status_text }}{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <style>
        .err{
            min-height:60vh; display:grid; place-items:center; position:relative; overflow:hidden;
            background:
                radial-gradient(80rem 40rem at 10% -10%, rgba(106,27,154,.10), transparent 60%),
                radial-gradient(60rem 30rem at 110% 20%, rgba(27,106,154,.06), transparent 60%);
        }
        .err .container{ text-align:center; padding:40px 16px }
        .err h1{ font-size:clamp(1.4rem,2.5vw,2rem); margin:.4rem 0 .4rem }
        .err .lead{ color:#6b7280; margin:0 0 1rem }

        .bigcode{
            display:inline-grid; place-items:center; gap:10px; margin:6px 0 10px;
        }
        .code{
            font-size: clamp(56px, 9vw, 96px);
            line-height:1; font-weight:900; letter-spacing:-.02em;
            color: transparent; -webkit-text-stroke: 2px #6A1B9A; text-stroke:2px #6A1B9A;
            text-shadow: 0 2px 0 rgba(0,0,0,.08);
        }
        .orb{
            width: clamp(72px, 10vw, 120px); height: clamp(72px, 10vw, 120px);
            border-radius:50%;
            background: radial-gradient(circle at 40% 30%, #fff 0 20%, #f3e8ff 21% 60%, #e9d5ff 61% 100%);
            position:relative; box-shadow: inset -10px -10px 24px rgba(106,27,154,.15), 0 6px 24px rgba(0,0,0,.06);
            animation: float 4.5s ease-in-out infinite;
        }
        .ring{
            position:absolute; inset:-6%; border-radius:50%;
            background: conic-gradient(from 140deg, rgba(106,27,154,.0), rgba(106,27,154,.32), rgba(106,27,154,.0) 70%);
            transform: rotateX(70deg) rotateZ(0deg);
            animation: spin 10s linear infinite; filter: blur(.2px);
        }
        @keyframes spin { to{ transform: rotateX(70deg) rotateZ(360deg); } }
        @keyframes float { 0%,100%{ transform: translateY(0) } 50%{ transform: translateY(-5px) } }

        .stars{ position:absolute; inset:0; pointer-events:none; opacity:.5 }
        .stars i{
            position:absolute; width:2px; height:2px; background:#c4b5fd; border-radius:50%; opacity:.9;
            animation: twinkle 2.6s ease-in-out infinite;
        }
        .stars i:nth-child(2){ top:20%; left:12%; animation-delay:.2s }
        .stars i:nth-child(3){ top:15%; left:80%; animation-delay:.9s }
        .stars i:nth-child(4){ top:72%; left:10%; animation-delay:1.2s }
        .stars i:nth-child(5){ top:68%; left:74%; animation-delay:.5s }
        @keyframes twinkle { 50%{ transform: scale(1.8); opacity:.4 } }

        .actions{ display:flex; gap:10px; flex-wrap:wrap; justify-content:center; margin:16px 0 6px }
        .btn{ display:inline-block; padding:12px 16px; border-radius:12px; border:1px solid #e5e7eb; background:#fff; text-decoration:none }
        .btn.primary{ background:#6A1B9A; border-color:#6A1B9A; color:#fff }
        .btn.ghost{ background:#fff }
        .btn:focus{ outline: 3px solid rgba(106,27,154,.25); outline-offset:2px }

        .tips{ margin-top:10px; color:#6b7280; font-size:.95rem }
        .tips ul{ list-style:none; padding:0; margin:8px 0 0; display:inline-flex; gap:14px; flex-wrap:wrap }
        .tips li{ background:rgba(106,27,154,.07); border:1px solid rgba(106,27,154,.15); color:#4b5563; padding:6px 10px; border-radius:999px }

        @media (prefers-color-scheme: dark) {
            .err .lead, .tips{ color:#9aa0a6 }
            .btn{ background: #0f1115; border-color:#2a2e37; color:#e5e7eb }
            .btn.ghost{ background:#0f1115 }
            .tips li{ background:#161923; border-color:#2a2e37; color:#aab2c0 }
            .orb{ box-shadow: inset -12px -12px 28px rgba(106,27,154,.25), 0 8px 40px rgba(0,0,0,.5) }
        }
    </style>
{% endblock %}

{% block body %}
    <main class="err">
        <div class="stars" aria-hidden="true">
            <i></i><i></i><i></i><i></i><i></i>
        </div>

        <section class="container">
            <div class="bigcode" aria-hidden="true">
                <span class="code">{{ status_code }}</span>
                <div class="orb"><div class="ring"></div></div>
            </div>

            <h1>{{ status_text }}</h1>
            <p class="lead">
                {% if status_code == 404 %}
                    Le lien a peut-être changé d’adresse ou n’existe plus.
                {% elseif status_code == 403 %}
                    Vous n’avez pas les droits suffisants pour accéder à cette page.
                {% elseif status_code >= 500 %}
                    Un incident s’est produit de notre côté. Réessayez dans un instant.
                {% else %}
                    Une erreur est survenue lors du chargement de la page.
                {% endif %}
            </p>

            <div class="actions">
                <a class="btn primary" href="{{ path('app_home') }}">Retour à l’accueil</a>
                <a class="btn ghost" href="javascript:history.back()">Page précédente</a>
                <a class="btn ghost" href="/contact">Contacter l’équipe</a>
            </div>

            <div class="tips" aria-label="Conseils">
                <ul>
                    <li>Vérifiez l’URL</li>
                    <li>Essayez le menu</li>
                    <li>Revenez à l’accueil</li>
                </ul>
            </div>
        </section>
    </main>
{% endblock %}
